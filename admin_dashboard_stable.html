<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹ìì¬ ê´€ë¦¬ ì‹œìŠ¤í…œ - ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</title>

    <!-- ì™¸ë¶€ CSS -->
    <link rel="stylesheet" href="static/css/admin-dashboard-main.css">

    <!-- í˜ì´ì§€ë³„ ì½˜í…ì¸  ê°€ì‹œì„± ë³´ì¥ CSS -->
    <style>
        /* ì¤‘ìš”: ëª¨ë“  í˜ì´ì§€ ì½˜í…ì¸ ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
        .page-content {
            display: none !important;
        }

        /* í™œì„±í™”ëœ í˜ì´ì§€ë§Œ í‘œì‹œ */
        .page-content.active {
            display: block !important;
        }

        /* ëŒ€ì‹œë³´ë“œëŠ” ì´ˆê¸°ì— í™œì„±í™” */
        #dashboard-content {
            display: block !important;
        }

        /* ModuleLoader ì—ëŸ¬ ì‹œ í´ë°± ìŠ¤íƒ€ì¼ */
        .module-loading {
            padding: 20px;
            text-align: center;
            color: #6c757d;
        }

        .module-error {
            padding: 20px;
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 5px;
            color: #856404;
            margin: 20px;
        }
    </style>
</head>
<body>
    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="admin-container">
        <!-- ì‚¬ì´ë“œë°” -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>ğŸ½ï¸ ì‹ìì¬ ê´€ë¦¬</h2>
                <p>ê´€ë¦¬ì ì‹œìŠ¤í…œ</p>
            </div>

            <div class="nav-menu">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <span class="icon">ğŸ“Š</span>ëŒ€ì‹œë³´ë“œ
                </a>
                <a href="#" class="nav-item" data-page="users">
                    <span class="icon">ğŸ‘¥</span>ì‚¬ìš©ì ê´€ë¦¬
                </a>
                <a href="#" class="nav-item" data-page="suppliers">
                    <span class="icon">ğŸš›</span>í˜‘ë ¥ì—…ì²´ ê´€ë¦¬
                </a>
                <a href="#" class="nav-item" data-page="business-locations">
                    <span class="icon">ğŸ¢</span>ì‚¬ì—…ì¥ ê´€ë¦¬
                </a>
                <a href="#" class="nav-item" data-page="meal-pricing">
                    <span class="icon">ğŸ’°</span>ì‹ë‹¨ê°€ ê´€ë¦¬
                </a>
                <a href="#" class="nav-item" data-page="ingredients">
                    <span class="icon">ğŸ“¦</span>ì‹ìì¬ ê´€ë¦¬
                </a>
            </div>

            <div class="sidebar-footer" style="margin-top: auto; padding: 20px;">
                <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 20px;">
                    <a href="/" class="nav-item" style="background: #e8f5e8; color: #4caf50;">
                        <span class="icon">ğŸ½ï¸</span>ê¸‰ì‹ê´€ë¦¬ë¡œ ì´ë™
                    </a>
                </div>
            </div>
        </nav>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <main class="main-content">
            <!-- í—¤ë” -->
            <div class="header">
                <h1 id="page-title">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
                <div class="header-info">
                    <div class="user-info">
                        ê´€ë¦¬ìë‹˜, ì•ˆë…•í•˜ì„¸ìš”! | ì˜¤ëŠ˜: <span id="current-date"></span>
                    </div>
                    <button class="logout-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
            </div>

            <!-- í˜ì´ì§€ë³„ ì»¨í…ì¸  ì˜ì—­ -->
            <div id="content-area">
                <!-- ëŒ€ì‹œë³´ë“œ ê¸°ë³¸ ì»¨í…ì¸  -->
                <div id="dashboard-content" class="page-content active">
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">ğŸ‘¥</span>
                                <h3 class="card-title">ì „ì²´ ì‚¬ìš©ì</h3>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-users">-</div>
                                <div class="stat-label">ë“±ë¡ëœ ì‚¬ìš©ì ìˆ˜</div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">ğŸ¢</span>
                                <h3 class="card-title">ì‚¬ì—…ì¥</h3>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-sites">-</div>
                                <div class="stat-label">ê´€ë¦¬ ì¤‘ì¸ ì‚¬ì—…ì¥</div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">ğŸ“¦</span>
                                <h3 class="card-title">ì‹ìì¬</h3>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-ingredients">84,215</div>
                                <div class="stat-label">ë“±ë¡ëœ ì‹ìì¬</div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">ğŸš›</span>
                                <h3 class="card-title">í˜‘ë ¥ì—…ì²´</h3>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-suppliers">5</div>
                                <div class="stat-label">ë“±ë¡ëœ í˜‘ë ¥ì—…ì²´</div>
                            </div>
                        </div>
                    </div>

                    <!-- ìµœê·¼ í™œë™ ë¡œê·¸ -->
                    <div class="activity-log">
                        <h3 style="margin-bottom: 20px;">ğŸ“ˆ ìµœê·¼ í™œë™</h3>
                        <div id="activity-list">
                            <div class="log-item">
                                <div class="log-time">ë°©ê¸ˆ ì „</div>
                                <div class="log-message">ì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì‚¬ìš©ì ê´€ë¦¬ í˜ì´ì§€ -->
                <div id="users-content" class="page-content">
                    <div class="content-wrapper">
                        <div class="module-loading">ì‚¬ìš©ì ê´€ë¦¬ ëª¨ë“ˆì„ ë¡œë”© ì¤‘...</div>
                    </div>
                </div>

                <!-- í˜‘ë ¥ì—…ì²´ ê´€ë¦¬ í˜ì´ì§€ -->
                <div id="suppliers-content" class="page-content">
                    <div class="content-wrapper">
                        <div class="module-loading">í˜‘ë ¥ì—…ì²´ ê´€ë¦¬ ëª¨ë“ˆì„ ë¡œë”© ì¤‘...</div>
                    </div>
                </div>

                <!-- ì‚¬ì—…ì¥ ê´€ë¦¬ í˜ì´ì§€ -->
                <div id="business-locations-content" class="page-content">
                    <div class="content-wrapper">
                        <div class="module-loading">ì‚¬ì—…ì¥ ê´€ë¦¬ ëª¨ë“ˆì„ ë¡œë”© ì¤‘...</div>
                    </div>
                </div>

                <!-- ì‹ë‹¨ê°€ ê´€ë¦¬ í˜ì´ì§€ -->
                <div id="meal-pricing-content" class="page-content">
                    <div class="content-wrapper">
                        <div class="module-loading">ì‹ë‹¨ê°€ ê´€ë¦¬ ëª¨ë“ˆì„ ë¡œë”© ì¤‘...</div>
                    </div>
                </div>

                <!-- ì‹ìì¬ ê´€ë¦¬ í˜ì´ì§€ -->
                <div id="ingredients-content" class="page-content">
                    <div class="content-wrapper">
                        <div class="module-loading">ì‹ìì¬ ê´€ë¦¬ ëª¨ë“ˆì„ ë¡œë”© ì¤‘...</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- CONFIG ì„¤ì • (ê°€ì¥ ë¨¼ì € ë¡œë“œ) -->
    <script src="config.js"></script>

    <!-- ğŸš€ ì•ˆì •ì ì¸ ì‹œìŠ¤í…œ ì´ˆê¸°í™” -->
    <script>
        // ì „ì—­ ìƒíƒœ ê´€ë¦¬
        window.AppState = {
            currentPage: 'dashboard',
            modules: {},
            initialized: false,
            moduleLoader: null
        };

        // ìŠ¤í¬ë¦½íŠ¸ ë™ì  ë¡œë“œ í—¬í¼
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                // ì´ë¯¸ ë¡œë“œëœ ìŠ¤í¬ë¦½íŠ¸ í™•ì¸
                if (document.querySelector(`script[src="${src}"]`)) {
                    console.log(`âœ… ${src} ì´ë¯¸ ë¡œë“œë¨`);
                    resolve();
                    return;
                }

                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    console.log(`âœ… ${src} ë¡œë“œ ì™„ë£Œ`);
                    resolve();
                };
                script.onerror = () => {
                    console.error(`âŒ ${src} ë¡œë“œ ì‹¤íŒ¨`);
                    reject(new Error(`Failed to load ${src}`));
                };
                document.head.appendChild(script);
            });
        }

        // ModuleLoader ì•ˆì „ ë¡œë“œ (ì˜µì…˜)
        async function tryLoadModuleLoader() {
            try {
                await loadScript('static/utils/module-loader.js');

                // ModuleLoader ì‚¬ìš© ê°€ëŠ¥ í™•ì¸
                if (window.ModuleLoader) {
                    window.AppState.moduleLoader = window.ModuleLoader;
                    console.log('âœ… ModuleLoader ì‹œìŠ¤í…œ í™œì„±í™”');
                    return true;
                }
            } catch (error) {
                console.warn('âš ï¸ ModuleLoader ë¡œë“œ ì‹¤íŒ¨, í´ë°± ëª¨ë“œ ì‚¬ìš©:', error);
            }
            return false;
        }

        // ëª¨ë“ˆ ë¡œë“œ (ModuleLoader ë˜ëŠ” ì§ì ‘ ë¡œë“œ)
        async function loadModule(moduleInfo) {
            try {
                // ModuleLoader ì‚¬ìš© ê°€ëŠ¥í•œ ê²½ìš°
                if (window.AppState.moduleLoader && moduleInfo.loaderName) {
                    console.log(`ğŸ“¦ ModuleLoaderë¡œ ${moduleInfo.loaderName} ë¡œë”©...`);
                    try {
                        const module = await window.AppState.moduleLoader.loadModule(moduleInfo.loaderName);
                        window.AppState.modules[moduleInfo.name] = module;
                        return module;
                    } catch (loaderError) {
                        console.warn(`âš ï¸ ModuleLoader ì‹¤íŒ¨, ì§ì ‘ ë¡œë“œ ì‹œë„:`, loaderError);
                    }
                }

                // ì§ì ‘ ë¡œë“œ í´ë°±
                console.log(`ğŸ“¦ ì§ì ‘ ë¡œë“œ: ${moduleInfo.name} (${moduleInfo.path})`);
                await loadScript(moduleInfo.path);

                // ì „ì—­ ê°ì²´ í™•ì¸ (ì ì‹œ ëŒ€ê¸°)
                await new Promise(resolve => setTimeout(resolve, 100));

                if (moduleInfo.global && window[moduleInfo.global]) {
                    window.AppState.modules[moduleInfo.name] = window[moduleInfo.global];

                    // ëª¨ë“ˆ ì´ˆê¸°í™”
                    if (typeof window[moduleInfo.global].init === 'function') {
                        await window[moduleInfo.global].init();
                    }

                    return window[moduleInfo.global];
                }

                console.log(`âœ… ${moduleInfo.name} ë¡œë“œ ì™„ë£Œ`);
                return true;

            } catch (error) {
                console.error(`âŒ ${moduleInfo.name} ë¡œë“œ ì‹¤íŒ¨:`, error);
                throw error;
            }
        }

        // í˜ì´ì§€ë³„ ëª¨ë“ˆ ë§¤í•‘
        const MODULE_MAP = {
            'users': {
                name: 'users',
                path: 'static/modules/users/users-complete.js',
                global: 'UsersModule',
                loaderName: 'users'  // ModuleLoaderì—ì„œ ì‚¬ìš©í•  ì´ë¦„
            },
            'suppliers': {
                name: 'suppliers',
                path: 'static/modules/suppliers/suppliers.js',
                global: 'SupplierManagement',
                loaderName: 'suppliers'
            },
            'business-locations': {
                name: 'sites',
                path: 'static/modules/sites/sites-complete.js',
                global: 'SitesModule',
                loaderName: 'sites'  // ModuleLoaderëŠ” 'sites'ë¡œ ì¸ì‹
            },
            'meal-pricing': {
                name: 'meal-pricing',
                path: 'static/modules/meal-pricing/meal-pricing.js',
                global: 'MealPricingManagement',
                loaderName: 'meal-pricing'
            },
            'ingredients': {
                name: 'ingredients',
                path: 'static/modules/ingredients/ingredients.js',
                global: 'IngredientManagement',
                loaderName: 'ingredients'
            }
        };

        // í˜ì´ì§€ ì „í™˜
        async function switchToPage(pageName) {
            console.log(`ğŸ”„ í˜ì´ì§€ ì „í™˜: ${pageName}`);

            // ë„¤ë¹„ê²Œì´ì…˜ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            const activeNavItem = document.querySelector(`[data-page="${pageName}"]`);
            if (activeNavItem) {
                activeNavItem.classList.add('active');
            }

            // í˜ì´ì§€ ì œëª© ì—…ë°ì´íŠ¸
            const titles = {
                'dashboard': 'ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ',
                'users': 'ì‚¬ìš©ì ê´€ë¦¬',
                'suppliers': 'í˜‘ë ¥ì—…ì²´ ê´€ë¦¬',
                'business-locations': 'ì‚¬ì—…ì¥ ê´€ë¦¬',
                'meal-pricing': 'ì‹ë‹¨ê°€ ê´€ë¦¬',
                'ingredients': 'ì‹ìì¬ ê´€ë¦¬'
            };

            document.getElementById('page-title').textContent = titles[pageName] || 'ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ';

            // ëª¨ë“  ì½˜í…ì¸  ìˆ¨ê¹€
            document.querySelectorAll('.page-content').forEach(content => {
                content.classList.remove('active');
            });

            // ëŒ€ìƒ ì½˜í…ì¸  í‘œì‹œ
            const targetContent = document.getElementById(`${pageName}-content`);
            if (targetContent) {
                targetContent.classList.add('active');

                // ëŒ€ì‹œë³´ë“œê°€ ì•„ë‹Œ ê²½ìš° ëª¨ë“ˆ ë¡œë“œ
                if (pageName !== 'dashboard' && MODULE_MAP[pageName]) {
                    const moduleInfo = MODULE_MAP[pageName];

                    // ì´ë¯¸ ë¡œë“œëœ ëª¨ë“ˆ í™•ì¸
                    if (!window.AppState.modules[moduleInfo.name]) {
                        const contentWrapper = targetContent.querySelector('.content-wrapper');
                        if (contentWrapper) {
                            try {
                                contentWrapper.innerHTML = '<div class="module-loading">ëª¨ë“ˆì„ ë¡œë”© ì¤‘ì…ë‹ˆë‹¤...</div>';
                                await loadModule(moduleInfo);

                                // ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ í›„ ì½˜í…ì¸  ì—…ë°ì´íŠ¸
                                if (window[moduleInfo.global]) {
                                    if (typeof window[moduleInfo.global].getHTML === 'function') {
                                        contentWrapper.innerHTML = window[moduleInfo.global].getHTML();
                                    } else {
                                        // ê¸°ë³¸ ì½˜í…ì¸  í…œí”Œë¦¿
                                        contentWrapper.innerHTML = getDefaultContent(pageName, titles[pageName]);
                                    }

                                    // ëª¨ë“ˆ íŠ¹ì • ì´ˆê¸°í™” ì‹¤í–‰
                                    if (typeof window[moduleInfo.global].onPageLoad === 'function') {
                                        await window[moduleInfo.global].onPageLoad();
                                    }
                                }
                            } catch (error) {
                                contentWrapper.innerHTML = `
                                    <div class="module-error">
                                        <h3>âš ï¸ ëª¨ë“ˆ ë¡œë“œ ì‹¤íŒ¨</h3>
                                        <p>${error.message}</p>
                                        <button onclick="switchToPage('${pageName}')" style="margin-top: 10px; padding: 5px 10px;">
                                            ë‹¤ì‹œ ì‹œë„
                                        </button>
                                    </div>
                                `;
                            }
                        }
                    } else {
                        // ì´ë¯¸ ë¡œë“œëœ ëª¨ë“ˆ ì¬í™œì„±í™”
                        const module = window.AppState.modules[moduleInfo.name];
                        if (module && typeof module.onPageLoad === 'function') {
                            await module.onPageLoad();
                        }
                    }
                }
            }

            window.AppState.currentPage = pageName;
        }

        // ë„¤ë¹„ê²Œì´ì…˜ ì„¤ì •
        function setupNavigation() {
            console.log('ğŸ§­ ë„¤ë¹„ê²Œì´ì…˜ ì„¤ì • ì¤‘...');

            document.querySelectorAll('.nav-item').forEach(navItem => {
                navItem.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetPage = this.getAttribute('data-page');
                    if (targetPage) {
                        switchToPage(targetPage);
                    }
                });
            });
        }

        // ë‚ ì§œ í‘œì‹œ
        function updateDate() {
            const currentDateElement = document.getElementById('current-date');
            if (currentDateElement) {
                currentDateElement.textContent = new Date().toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    weekday: 'short'
                });
            }
        }

        // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                console.log('ğŸšª ë¡œê·¸ì•„ì›ƒ...');
                window.location.href = '/';
            }
        }

        // ëŒ€ì‹œë³´ë“œ í†µê³„ ë¡œë“œ
        async function loadDashboardStats() {
            try {
                // API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜ (ì‹¤ì œë¡œëŠ” CONFIG.API.BASE_URL ì‚¬ìš©)
                console.log('ğŸ“Š ëŒ€ì‹œë³´ë“œ í†µê³„ ë¡œë”©...');

                // ì‹¤ì œ ë°ì´í„°ë¡œ ì—…ë°ì´íŠ¸ (í˜„ì¬ëŠ” í•˜ë“œì½”ë”©)
                document.getElementById('total-users').textContent = '12';
                document.getElementById('total-sites').textContent = '45';
                document.getElementById('total-ingredients').textContent = '84,215';
                document.getElementById('total-suppliers').textContent = '5';

            } catch (error) {
                console.error('ëŒ€ì‹œë³´ë“œ í†µê³„ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // ë©”ì¸ ì´ˆê¸°í™” í•¨ìˆ˜
        async function initializeApp() {
            console.log('ğŸš€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì‹œì‘...');

            try {
                // 1. ë‚ ì§œ ì—…ë°ì´íŠ¸
                updateDate();

                // 2. ModuleLoader ì‹œë„ (ì˜µì…˜)
                const hasModuleLoader = await tryLoadModuleLoader();
                console.log(`ModuleLoader ìƒíƒœ: ${hasModuleLoader ? 'í™œì„±' : 'ë¹„í™œì„± (í´ë°± ëª¨ë“œ)'}`);

                // 3. ë„¤ë¹„ê²Œì´ì…˜ ì„¤ì •
                setupNavigation();

                // 4. ëŒ€ì‹œë³´ë“œ í†µê³„ ë¡œë“œ
                await loadDashboardStats();

                // 5. ì´ˆê¸°í™” ì™„ë£Œ
                window.AppState.initialized = true;
                console.log('âœ… ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì™„ë£Œ');

            } catch (error) {
                console.error('âŒ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                document.getElementById('content-area').innerHTML = `
                    <div style="padding: 40px; text-align: center;">
                        <h2>âš ï¸ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹¤íŒ¨</h2>
                        <p>${error.message}</p>
                        <button onclick="location.reload()" style="margin-top: 20px; padding: 10px 20px;">
                            ìƒˆë¡œê³ ì¹¨
                        </button>
                    </div>
                `;
            }
        }

        // ê° í˜ì´ì§€ë³„ ê¸°ë³¸ ì½˜í…ì¸  í…œí”Œë¦¿
        function getDefaultContent(pageName, title) {
            const templates = {
                'users': `
                    <div class="page-header">
                        <h2>${title}</h2>
                        <button class="btn btn-primary">+ ìƒˆ ì‚¬ìš©ì ì¶”ê°€</button>
                    </div>
                    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 20px 0;">
                        <div class="stat-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <h3>12</h3>
                            <p>ì „ì²´ ì‚¬ìš©ì</p>
                        </div>
                        <div class="stat-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <h3>10</h3>
                            <p>í™œì„± ì‚¬ìš©ì</p>
                        </div>
                        <div class="stat-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <h3>3</h3>
                            <p>ê´€ë¦¬ì</p>
                        </div>
                        <div class="stat-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <h3>9</h3>
                            <p>ì˜ì–‘ì‚¬</p>
                        </div>
                    </div>
                    <div class="table-container" style="background: white; padding: 20px; border-radius: 8px;">
                        <table style="width: 100%;">
                            <thead>
                                <tr>
                                    <th>ì‚¬ìš©ìëª…</th>
                                    <th>ê¶Œí•œ</th>
                                    <th>ë¶€ì„œ</th>
                                    <th>ìƒíƒœ</th>
                                    <th>ì‘ì—…</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="5" style="text-align: center; padding: 20px;">ë°ì´í„° ë¡œë”© ì¤‘...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                `,
                'suppliers': `
                    <div class="page-header">
                        <h2>${title}</h2>
                        <button class="btn btn-primary">+ ìƒˆ í˜‘ë ¥ì—…ì²´ ì¶”ê°€</button>
                    </div>
                    <div class="suppliers-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 20px 0;">
                        <div class="supplier-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <h3>ì‚¼ì„±ì›°ìŠ¤í† ë¦¬</h3>
                            <p>ì‹ìì¬: 18,928ê°œ</p>
                        </div>
                        <div class="supplier-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <h3>í˜„ëŒ€ê·¸ë¦°í‘¸ë“œ</h3>
                            <p>ì‹ìì¬: 18,469ê°œ</p>
                        </div>
                        <div class="supplier-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <h3>CJí”„ë ˆì‹œì›¨ì´</h3>
                            <p>ì‹ìì¬: 16,606ê°œ</p>
                        </div>
                    </div>
                `,
                'business-locations': `
                    <div class="page-header">
                        <h2>${title}</h2>
                        <button class="btn btn-primary">+ ìƒˆ ì‚¬ì—…ì¥ ì¶”ê°€</button>
                    </div>
                    <div class="locations-list" style="background: white; padding: 20px; border-radius: 8px; margin-top: 20px;">
                        <p>ë“±ë¡ëœ ì‚¬ì—…ì¥: 45ê°œ</p>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 10px; border-bottom: 1px solid #eee;">ë„ì‹œë½ ì‚¬ì—…ì¥ (15ê°œ)</li>
                            <li style="padding: 10px; border-bottom: 1px solid #eee;">í•™êµ ê¸‰ì‹ (12ê°œ)</li>
                            <li style="padding: 10px; border-bottom: 1px solid #eee;">ìš”ì–‘ì› (10ê°œ)</li>
                            <li style="padding: 10px; border-bottom: 1px solid #eee;">ê¸°ì—…ì²´ (8ê°œ)</li>
                        </ul>
                    </div>
                `,
                'meal-pricing': `
                    <div class="page-header">
                        <h2>${title}</h2>
                        <button class="btn btn-primary">+ ìƒˆ ì‹ë‹¨ê°€ ì„¤ì •</button>
                    </div>
                    <div class="pricing-overview" style="background: white; padding: 20px; border-radius: 8px; margin-top: 20px;">
                        <h3>ì‹ë‹¨ê°€ ê°œìš”</h3>
                        <p>í‰ê·  ì‹ë‹¨ê°€: 5,500ì›</p>
                        <p>ìµœì €ê°€: 3,800ì› | ìµœê³ ê°€: 8,200ì›</p>
                    </div>
                `,
                'ingredients': `
                    <div class="page-header">
                        <h2>${title}</h2>
                        <button class="btn btn-primary">+ ìƒˆ ì‹ìì¬ ì¶”ê°€</button>
                    </div>
                    <div class="ingredients-stats" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">
                        <div class="stat-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <h3>84,215</h3>
                            <p>ì „ì²´ ì‹ìì¬</p>
                        </div>
                        <div class="stat-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <h3>5</h3>
                            <p>í˜‘ë ¥ì—…ì²´</p>
                        </div>
                    </div>
                `
            };

            return templates[pageName] || `
                <div style="padding: 20px;">
                    <h2>${title}</h2>
                    <p>í˜ì´ì§€ ì½˜í…ì¸ ë¥¼ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.</p>
                </div>
            `;
        }

        // DOMContentLoaded ì´ë²¤íŠ¸ (ë‹¨ì¼ í•¸ë“¤ëŸ¬)
        document.addEventListener('DOMContentLoaded', initializeApp);

        // ë””ë²„ê·¸ ë„êµ¬
        window.debugApp = {
            state: () => window.AppState,
            reload: () => location.reload(),
            switchPage: (page) => switchToPage(page),
            modules: () => Object.keys(window.AppState.modules)
        };

        console.log('ğŸ“Œ ë””ë²„ê·¸ ëª…ë ¹ì–´:');
        console.log('  debugApp.state() - ì•± ìƒíƒœ í™•ì¸');
        console.log('  debugApp.modules() - ë¡œë“œëœ ëª¨ë“ˆ ëª©ë¡');
        console.log('  debugApp.switchPage("users") - í˜ì´ì§€ ì „í™˜');
        console.log('  debugApp.reload() - ìƒˆë¡œê³ ì¹¨');
    </script>
</body>
</html>