<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> ì‹ìì¬ ê´€ë¦¬ ì‹œìŠ¤í…œ - ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">

    <!-- ì™¸ë¶€ CSS -->
    <link rel="stylesheet" href="static/css/admin-dashboard-main.css">
    <link rel="stylesheet" href="static/css/admin-dashboard-inline.css">

    <!-- ìµœì†Œ í´ë°± CSS (file:// í”„ë¡œí† ì½œìš©) -->
    <style>
        /* file:// í”„ë¡œí† ì½œì—ì„œ ì™¸ë¶€ CSS ë¡œë“œ ì‹¤íŒ¨ì‹œ ìµœì†Œí•œì˜ ë ˆì´ì•„ì›ƒ ìœ ì§€ */
        body { margin: 0; font-family: 'Segoe UI', Arial, sans-serif; background: #f5f5f5; }
        .container { display: flex; height: 100vh; }
        .sidebar { width: 280px; background: #2a5298; color: white; }
        .main-content { flex: 1; overflow-y: auto; }
        .header { background: white; padding: 10px; }
        .page-content { display: none; }
        .page-content.active { display: block; }
        .nav-item { display: block; padding: 12px 20px; color: white; text-decoration: none; }
        .nav-item.active { background: rgba(255,255,255,0.2); }
    </style>
</head>
<body>
    <!-- ê´€ë¦¬ì í˜ì´ì§€ í‘œì‹œ -->
    <div style="background: linear-gradient(90deg, #e74c3c, #c0392b); color: white; padding: 8px; text-align: center; font-size: 14px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        ğŸ” ê´€ë¦¬ì ì „ìš© í˜ì´ì§€ - ADMIN ONLY
    </div>
    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="container">
        <!-- ì‚¬ì´ë“œë°” -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>ğŸ½ï¸ ì‹ìì¬ ê´€ë¦¬</h2>
                <p>ê´€ë¦¬ì ì‹œìŠ¤í…œ</p>
            </div>
            
            <div class="nav-menu">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <span class="icon">ğŸ“Š</span>ëŒ€ì‹œë³´ë“œ
                </a>
                <a href="#" class="nav-item" data-page="users">
                    <span class="icon">ğŸ‘¥</span>ì‚¬ìš©ì ê´€ë¦¬
                </a>
                <a href="#" class="nav-item" data-page="suppliers">
                    <span class="icon">ğŸš›</span>í˜‘ë ¥ì—…ì²´ ê´€ë¦¬
                </a>
                <a href="#" class="nav-item" data-page="business-locations">
                    <span class="icon">ğŸ¢</span>ì‚¬ì—…ì¥ ê´€ë¦¬
                </a>
                <a href="#" class="nav-item" data-page="supplier-mapping">
                    <span class="icon">ğŸ”—</span>í˜‘ë ¥ì—…ì²´ ë§¤ì¹­
                </a>
                <a href="#" class="nav-item" data-page="meal-pricing">
                    <span class="icon">ğŸ’°</span>ì‹ë‹¨ê°€ ê´€ë¦¬
                </a>
                <a href="#" class="nav-item" data-page="ingredients">
                    <span class="icon">ğŸ“¦</span>ì‹ìì¬ ê´€ë¦¬
                </a>
            </div>
            
            <div class="sidebar-footer" style="margin-top: auto; padding: 20px;">
                <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 20px;">
                    <a href="dashboard.html" style="display: block; padding: 12px 20px; background: #e8f5e8; color: #4caf50; text-decoration: none; border-radius: 8px; text-align: center; font-weight: 600;">
                        <span class="icon">ğŸ½ï¸</span>ê¸‰ì‹ê´€ë¦¬ë¡œ ì´ë™
                    </a>
                </div>
            </div>
        </nav>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <main class="main-content">
            <!-- í—¤ë” -->
            <div class="header">
                <h1 id="page-title">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
                <div class="header-info">
                    <div class="user-info">
                        ê´€ë¦¬ìë‹˜, ì•ˆë…•í•˜ì„¸ìš”! | ì˜¤ëŠ˜: <span id="current-date"></span>
                    </div>
                    <button class="server-btn" onclick="startServer()" style="margin-right: 10px; background: #4caf50; color: white; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer;">ì„œë²„ ì‹œì‘</button>
                    <button class="logout-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
            </div>

            <!-- í˜ì´ì§€ë³„ ì»¨í…ì¸  ì˜ì—­ -->
            <div id="content-area">
                <!-- ëŒ€ì‹œë³´ë“œ ê¸°ë³¸ ì»¨í…ì¸  -->
                <div id="dashboard-content" class="page-content active">
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">ğŸ‘¥</span>
                                <h3 class="card-title">ì „ì²´ ì‚¬ìš©ì</h3>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-users">-</div>
                                <div class="stat-label">ë“±ë¡ëœ ì‚¬ìš©ì ìˆ˜</div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">ğŸ¢</span>
                                <h3 class="card-title">ì‚¬ì—…ì¥</h3>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-sites">-</div>
                                <div class="stat-label">ê´€ë¦¬ ì¤‘ì¸ ì‚¬ì—…ì¥</div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">ğŸ“¦</span>
                                <h3 class="card-title">ì‹ìì¬</h3>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-ingredients">-</div>
                                <div class="stat-label">ë“±ë¡ëœ ì‹ìì¬</div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">ğŸš›</span>
                                <h3 class="card-title">í˜‘ë ¥ì—…ì²´</h3>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-suppliers">-</div>
                                <div class="stat-label">ë“±ë¡ëœ í˜‘ë ¥ì—…ì²´</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ìµœê·¼ í™œë™ ë¡œê·¸ -->
                    <div class="activity-log">
                        <h3 style="margin-bottom: 20px;">ğŸ“ˆ ìµœê·¼ í™œë™</h3>
                        <div id="activity-list">
                            <div class="log-item">
                                <div class="log-time">ë¡œë”© ì¤‘...</div>
                                <div class="log-message">ì‹œìŠ¤í…œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ìˆìŠµë‹ˆë‹¤.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ë‹¤ë¥¸ í˜ì´ì§€ ì»¨í…ì¸ ë“¤ì€ ë™ì ìœ¼ë¡œ ë¡œë“œ -->
                <div id="users-content" class="page-content">
                    <!-- í…œí”Œë¦¿ìœ¼ë¡œ ë™ì  ë¡œë“œ (static/templates/users-section.html) -->
                </div>

                <!-- ì‚¬ìš©ì ëª¨ë‹¬ì€ ë™ì ìœ¼ë¡œ ë¡œë“œë¨ (user-modal.html) -->
                <div id="userModalContainer"></div>
                
                <div id="suppliers-content" class="page-content">
                    <!-- í…œí”Œë¦¿ìœ¼ë¡œ ë™ì  ë¡œë“œ (static/templates/suppliers-section.html) -->
                </div>
                
                <div id="business-locations-content" class="page-content">
                    <!-- í…œí”Œë¦¿ìœ¼ë¡œ ë™ì  ë¡œë“œ (static/templates/sites-section.html) -->
                </div>

                <div id="supplier-mapping-content" class="page-content" style="display: none;">
                    <!-- í˜‘ë ¥ì—…ì²´ ë§¤ì¹­ ëª¨ë“ˆì´ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
                </div>

                <div id="meal-pricing-content" class="page-content" style="display: none;">
                    <!-- í…œí”Œë¦¿ìœ¼ë¡œ ë™ì  ë¡œë“œ (static/templates/meal-pricing-section.html) -->
                </div>
                
                <div id="ingredients-content" class="page-content" style="display: none;">
                    <!-- ì‹ìì¬ ê´€ë¦¬ ëª¨ë“ˆì´ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
                </div>

            </div>
        </main>
    </div>

    <!-- ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ (HTTP í™˜ê²½ì—ì„œë§Œ ì‘ë™) -->
    <!-- <script src="static/js/admin-dashboard-init.js"></script> -->

    <!-- CONFIG ë° ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // ìµœì†Œí•œì˜ CONFIG ì„¤ì • (í´ë°±ìš©)
        window.CONFIG = {
            API_BASE_URL: 'http://127.0.0.1:8010',
            API_TIMEOUT: 30000
        };

        // ì„œë²„ ì‹œì‘ í•¨ìˆ˜
        function startServer() {
            const btn = document.querySelector('.server-btn');
            btn.disabled = true;
            btn.textContent = 'ì„œë²„ ì‹œì‘ ì¤‘...';

            // Windows í™˜ê²½ì—ì„œ ìƒˆ ì½˜ì†” ì°½ìœ¼ë¡œ ì„œë²„ ì‹¤í–‰
            const cmd = 'start cmd /k python test_samsung_api.py';

            // ì‹¤ì œ ì„œë²„ ì‹œì‘ ëª…ë ¹ ì‹¤í–‰ (ë¡œì»¬ í™˜ê²½ì—ì„œë§Œ ë™ì‘)
            fetch('http://127.0.0.1:8080/execute', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ command: cmd })
            })
            .then(response => {
                if (response.ok) {
                    btn.style.background = '#8bc34a';
                    btn.textContent = 'ì„œë²„ ì‹¤í–‰ ì¤‘';
                    setTimeout(() => {
                        window.location.reload();
                    }, 2000);
                } else {
                    throw new Error('ì„œë²„ ì‹œì‘ ì‹¤íŒ¨');
                }
            })
            .catch(error => {
                // ë¡œì»¬ì—ì„œ ì§ì ‘ ì‹¤í–‰ ì‹œë„
                alert('ì„œë²„ë¥¼ ì§ì ‘ ì‹¤í–‰í•´ì£¼ì„¸ìš”:\npython test_samsung_api.py');
                btn.disabled = false;
                btn.textContent = 'ì„œë²„ ì‹œì‘';
            });
        }
    </script>

    <!-- ë©”ì¸ ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="static/js/dashboard-init-complete.js"></script>

    <!-- ê°œì„ ëœ ì‚¬ìš©ì ê´€ë¦¬ ëª¨ë“ˆì€ dashboard-init-complete.jsì—ì„œ ìë™ ë¡œë“œë¨ -->

</body>
</html>