<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹œìŠ¤í…œ ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸ ëŒ€ì‹œë³´ë“œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
        }

        .status-loading { background: #ffeaa7; color: #2d3436; }
        .status-healthy { background: #00b894; color: white; }
        .status-error { background: #e17055; color: white; }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 5px solid #3498db;
        }

        .card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-content {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }

        .button:hover {
            background: #2980b9;
        }

        .button.danger {
            background: #e74c3c;
        }

        .button.danger:hover {
            background: #c0392b;
        }

        .button.success {
            background: #27ae60;
        }

        .button.success:hover {
            background: #229954;
        }

        .console {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin-top: 20px;
        }

        .console-line {
            margin-bottom: 5px;
        }

        .console-line.info { color: #3498db; }
        .console-line.success { color: #27ae60; }
        .console-line.error { color: #e74c3c; }
        .console-line.warning { color: #f39c12; }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .metric {
            text-align: center;
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
        }

        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }

        .metric-label {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 5px;
        }

        .controls {
            text-align: center;
            margin: 30px 0;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ ì‹œìŠ¤í…œ ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸ ëŒ€ì‹œë³´ë“œ</h1>
            <div id="overall-status" class="status-badge status-loading">ì´ˆê¸°í™” ì¤‘...</div>
        </div>

        <div class="controls">
            <button class="button success" onclick="initializeAgents()">ğŸš€ ì—ì´ì „íŠ¸ ì´ˆê¸°í™”</button>
            <button class="button" onclick="checkStatus()">ğŸ“Š ìƒíƒœ í™•ì¸</button>
            <button class="button" onclick="testAllAgents()">ğŸ§ª ì „ì²´ í…ŒìŠ¤íŠ¸</button>
            <button class="button danger" onclick="stopAllAgents()">ğŸ›‘ ëª¨ë“  ì—ì´ì „íŠ¸ ì •ì§€</button>
        </div>

        <div class="grid">
            <!-- ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸ ì¹´ë“œ -->
            <div class="card">
                <h3>ğŸ” ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸</h3>
                <div class="card-content">
                    <div><strong>ìƒíƒœ:</strong> <span id="monitoring-status">ëŒ€ê¸° ì¤‘</span></div>
                    <div class="metrics">
                        <div class="metric">
                            <div class="metric-value" id="cpu-usage">-</div>
                            <div class="metric-label">CPU ì‚¬ìš©ë¥ </div>
                        </div>
                        <div class="metric">
                            <div class="metric-value" id="memory-usage">-</div>
                            <div class="metric-label">ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ </div>
                        </div>
                        <div class="metric">
                            <div class="metric-value" id="error-count">-</div>
                            <div class="metric-label">ì—ëŸ¬ ê°œìˆ˜</div>
                        </div>
                    </div>
                    <button class="button" onclick="testMonitoring()">ğŸ” ëª¨ë‹ˆí„°ë§ í…ŒìŠ¤íŠ¸</button>
                    <button class="button" onclick="generateTestError()">âš ï¸ í…ŒìŠ¤íŠ¸ ì—ëŸ¬ ìƒì„±</button>
                </div>
            </div>

            <!-- ìœ ì§€ë³´ìˆ˜ ì—ì´ì „íŠ¸ ì¹´ë“œ -->
            <div class="card">
                <h3>ğŸ”§ ìœ ì§€ë³´ìˆ˜ ì—ì´ì „íŠ¸</h3>
                <div class="card-content">
                    <div><strong>ìƒíƒœ:</strong> <span id="maintenance-status">ëŒ€ê¸° ì¤‘</span></div>
                    <div><strong>ë§ˆì§€ë§‰ ë°±ì—…:</strong> <span id="last-backup">-</span></div>
                    <div><strong>ë§ˆì§€ë§‰ í—¬ìŠ¤ì²´í¬:</strong> <span id="last-healthcheck">-</span></div>
                    <button class="button" onclick="testMaintenance()">ğŸ”§ ìœ ì§€ë³´ìˆ˜ í…ŒìŠ¤íŠ¸</button>
                    <button class="button" onclick="createTestBackup()">ğŸ’¾ í…ŒìŠ¤íŠ¸ ë°±ì—…</button>
                    <button class="button" onclick="runHealthCheck()">ğŸ¥ í—¬ìŠ¤ì²´í¬</button>
                </div>
            </div>

            <!-- API ê²Œì´íŠ¸ì›¨ì´ ì—ì´ì „íŠ¸ ì¹´ë“œ -->
            <div class="card">
                <h3>ğŸŒ API ê²Œì´íŠ¸ì›¨ì´ ì—ì´ì „íŠ¸</h3>
                <div class="card-content">
                    <div><strong>ìƒíƒœ:</strong> <span id="gateway-status">ëŒ€ê¸° ì¤‘</span></div>
                    <div class="metrics">
                        <div class="metric">
                            <div class="metric-value" id="total-requests">-</div>
                            <div class="metric-label">ì´ ìš”ì²­</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value" id="success-rate">-</div>
                            <div class="metric-label">ì„±ê³µë¥ </div>
                        </div>
                        <div class="metric">
                            <div class="metric-value" id="avg-response">-</div>
                            <div class="metric-label">í‰ê·  ì‘ë‹µì‹œê°„</div>
                        </div>
                    </div>
                    <button class="button" onclick="testGateway()">ğŸŒ ê²Œì´íŠ¸ì›¨ì´ í…ŒìŠ¤íŠ¸</button>
                    <button class="button" onclick="testAPICall()">ğŸ“¡ API í˜¸ì¶œ í…ŒìŠ¤íŠ¸</button>
                </div>
            </div>

            <!-- ì‹œìŠ¤í…œ í†µí•© ìƒíƒœ ì¹´ë“œ -->
            <div class="card">
                <h3>âš¡ ì‹œìŠ¤í…œ í†µí•© ìƒíƒœ</h3>
                <div class="card-content">
                    <div><strong>ì´ˆê¸°í™” ìƒíƒœ:</strong> <span id="init-status">ë¯¸ì´ˆê¸°í™”</span></div>
                    <div><strong>í™œì„± ì—ì´ì „íŠ¸:</strong> <span id="active-agents">0/3</span></div>
                    <div><strong>ì „ì²´ í—¬ìŠ¤:</strong> <span id="system-health">ì•Œ ìˆ˜ ì—†ìŒ</span></div>
                    <button class="button" onclick="showSystemInfo()">ğŸ“‹ ì‹œìŠ¤í…œ ì •ë³´</button>
                    <button class="button" onclick="clearConsole()">ğŸ—‘ï¸ ì½˜ì†” ì§€ìš°ê¸°</button>
                </div>
            </div>
        </div>

        <div class="console" id="console">
            <div class="console-line info">[INFO] ì‹œìŠ¤í…œ ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸ ëŒ€ì‹œë³´ë“œ ì¤€ë¹„ ì™„ë£Œ</div>
            <div class="console-line info">[INFO] ì—ì´ì „íŠ¸ ì´ˆê¸°í™”ë¥¼ ì‹œì‘í•˜ë ¤ë©´ 'ì—ì´ì „íŠ¸ ì´ˆê¸°í™”' ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”</div>
        </div>
    </div>

    <!-- ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="system/core/module-registry.js"></script>
    <script src="system/init-system-agents.js"></script>

    <script>
        // ì½˜ì†” ë¡œê¹… í•¨ìˆ˜
        function log(message, type = 'info') {
            const console = document.getElementById('console');
            const timestamp = new Date().toLocaleTimeString();
            const line = document.createElement('div');
            line.className = `console-line ${type}`;
            line.textContent = `[${timestamp}] [${type.toUpperCase()}] ${message}`;
            console.appendChild(line);
            console.scrollTop = console.scrollHeight;
        }

        // ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateStatus(elementId, status, isHealthy = true) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = status;
                element.className = isHealthy ? 'status-healthy' : 'status-error';
            }
        }

        // ì „ì²´ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateOverallStatus() {
            if (window.SystemAgents) {
                const health = window.SystemAgents.getHealth();
                const badge = document.getElementById('overall-status');

                badge.textContent = `ì‹œìŠ¤í…œ ${health.overall}`;
                badge.className = `status-badge ${
                    health.overall === 'healthy' ? 'status-healthy' :
                    health.overall === 'unhealthy' ? 'status-error' : 'status-loading'
                }`;
            }
        }

        // ì—ì´ì „íŠ¸ ì´ˆê¸°í™”
        async function initializeAgents() {
            try {
                log('ì‹œìŠ¤í…œ ì—ì´ì „íŠ¸ ì´ˆê¸°í™” ì‹œì‘...', 'info');

                if (!window.SystemAgentManager) {
                    log('SystemAgentManagerë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                    return;
                }

                await window.SystemAgentManager.initializeAll();
                log('ëª¨ë“  ì‹œìŠ¤í…œ ì—ì´ì „íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');

                // ìƒíƒœ ì—…ë°ì´íŠ¸
                checkStatus();

            } catch (error) {
                log(`ì—ì´ì „íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // ìƒíƒœ í™•ì¸
        function checkStatus() {
            try {
                if (!window.SystemAgents) {
                    log('ì‹œìŠ¤í…œ ì—ì´ì „íŠ¸ê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤', 'warning');
                    return;
                }

                const status = window.SystemAgents.getStatus();
                const health = window.SystemAgents.getHealth();

                // ì „ì²´ ìƒíƒœ
                document.getElementById('init-status').textContent = status.initialized ? 'ì´ˆê¸°í™” ì™„ë£Œ' : 'ë¯¸ì´ˆê¸°í™”';
                document.getElementById('active-agents').textContent = `${status.agentCount}/3`;
                document.getElementById('system-health').textContent = health.overall;

                // ê°œë³„ ì—ì´ì „íŠ¸ ìƒíƒœ
                if (status.agents.monitoring) {
                    document.getElementById('monitoring-status').textContent = 'í™œì„±í™”';
                    updateMonitoringMetrics();
                }

                if (status.agents.maintenance) {
                    document.getElementById('maintenance-status').textContent = 'í™œì„±í™”';
                    updateMaintenanceInfo();
                }

                if (status.agents['api-gateway']) {
                    document.getElementById('gateway-status').textContent = 'í™œì„±í™”';
                    updateGatewayMetrics();
                }

                updateOverallStatus();
                log('ìƒíƒœ í™•ì¸ ì™„ë£Œ', 'success');

            } catch (error) {
                log(`ìƒíƒœ í™•ì¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // ëª¨ë‹ˆí„°ë§ ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸
        function updateMonitoringMetrics() {
            try {
                const monitoring = window.SystemAgents.monitoring;
                if (monitoring && monitoring.getPublicInterface) {
                    const api = monitoring.getPublicInterface();
                    const metrics = api.getSystemMetrics();

                    document.getElementById('cpu-usage').textContent = `${metrics.cpuUsage}%`;
                    document.getElementById('memory-usage').textContent = `${metrics.memoryUsage}%`;

                    const errorLogs = api.getErrorLogs(10);
                    document.getElementById('error-count').textContent = errorLogs.length;
                }
            } catch (error) {
                log(`ëª¨ë‹ˆí„°ë§ ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // ìœ ì§€ë³´ìˆ˜ ì •ë³´ ì—…ë°ì´íŠ¸
        function updateMaintenanceInfo() {
            try {
                const maintenance = window.SystemAgents.maintenance;
                if (maintenance && maintenance.getPublicInterface) {
                    const api = maintenance.getPublicInterface();

                    // ë°±ì—… ì´ë ¥ì´ ìˆë‹¤ë©´ ë§ˆì§€ë§‰ ë°±ì—… í‘œì‹œ
                    const backups = api.getBackupHistory();
                    if (backups.length > 0) {
                        const lastBackup = new Date(backups[backups.length - 1].timestamp);
                        document.getElementById('last-backup').textContent = lastBackup.toLocaleString();
                    }

                    // í—¬ìŠ¤ì²´í¬ ê²°ê³¼
                    const health = api.getHealthStatus();
                    if (health.timestamp) {
                        const lastCheck = new Date(health.timestamp);
                        document.getElementById('last-healthcheck').textContent = lastCheck.toLocaleString();
                    }
                }
            } catch (error) {
                log(`ìœ ì§€ë³´ìˆ˜ ì •ë³´ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // ê²Œì´íŠ¸ì›¨ì´ ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸
        function updateGatewayMetrics() {
            try {
                const gateway = window.SystemAgents.apiGateway;
                if (gateway && gateway.getPublicInterface) {
                    const api = gateway.getPublicInterface();
                    const stats = api.getStatistics();

                    document.getElementById('total-requests').textContent = stats.totalRequests;

                    const successRate = stats.totalRequests > 0 ?
                        Math.round((stats.successfulRequests / stats.totalRequests) * 100) : 0;
                    document.getElementById('success-rate').textContent = `${successRate}%`;

                    document.getElementById('avg-response').textContent = `${Math.round(stats.averageResponseTime)}ms`;
                }
            } catch (error) {
                log(`ê²Œì´íŠ¸ì›¨ì´ ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // ê°œë³„ ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤
        async function testMonitoring() {
            log('ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');
            try {
                const monitoring = window.SystemAgents.monitoring;
                if (monitoring && monitoring.getPublicInterface) {
                    const api = monitoring.getPublicInterface();
                    api.startMonitoring();
                    log('ëª¨ë‹ˆí„°ë§ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');

                    // 5ì´ˆ í›„ ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸
                    setTimeout(() => {
                        updateMonitoringMetrics();
                        log('ëª¨ë‹ˆí„°ë§ ë©”íŠ¸ë¦­ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤', 'info');
                    }, 5000);
                } else {
                    log('ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                }
            } catch (error) {
                log(`ëª¨ë‹ˆí„°ë§ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        async function testMaintenance() {
            log('ìœ ì§€ë³´ìˆ˜ ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');
            try {
                const maintenance = window.SystemAgents.maintenance;
                if (maintenance && maintenance.getPublicInterface) {
                    const api = maintenance.getPublicInterface();
                    log('ìœ ì§€ë³´ìˆ˜ ì—ì´ì „íŠ¸ê°€ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤', 'success');

                    // ì„¤ì • ì •ë³´ í‘œì‹œ
                    const config = api.getConfig();
                    log(`ë°±ì—… ê°„ê²©: ${config.backupInterval / (60 * 60 * 1000)}ì‹œê°„`, 'info');
                } else {
                    log('ìœ ì§€ë³´ìˆ˜ ì—ì´ì „íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                }
            } catch (error) {
                log(`ìœ ì§€ë³´ìˆ˜ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        async function testGateway() {
            log('API ê²Œì´íŠ¸ì›¨ì´ í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');
            try {
                const gateway = window.SystemAgents.apiGateway;
                if (gateway && gateway.getPublicInterface) {
                    const api = gateway.getPublicInterface();

                    if (api.isActive()) {
                        log('API ê²Œì´íŠ¸ì›¨ì´ê°€ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤', 'success');
                    } else {
                        api.startGateway();
                        log('API ê²Œì´íŠ¸ì›¨ì´ë¥¼ ì‹œì‘í–ˆìŠµë‹ˆë‹¤', 'info');
                    }

                    const services = api.getServices();
                    log(`ë“±ë¡ëœ ì„œë¹„ìŠ¤ ê°œìˆ˜: ${services.length}`, 'info');
                } else {
                    log('API ê²Œì´íŠ¸ì›¨ì´ ì—ì´ì „íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                }
            } catch (error) {
                log(`ê²Œì´íŠ¸ì›¨ì´ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // í…ŒìŠ¤íŠ¸ í—¬í¼ í•¨ìˆ˜ë“¤
        function generateTestError() {
            log('í…ŒìŠ¤íŠ¸ ì—ëŸ¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤...', 'warning');
            // ì˜ë„ì ì¸ ì—ëŸ¬ ìƒì„±
            try {
                throw new Error('í…ŒìŠ¤íŠ¸ìš© ì—ëŸ¬ì…ë‹ˆë‹¤');
            } catch (error) {
                log(`í…ŒìŠ¤íŠ¸ ì—ëŸ¬ ìƒì„±ë¨: ${error.message}`, 'error');
            }
        }

        async function createTestBackup() {
            log('í…ŒìŠ¤íŠ¸ ë°±ì—…ì„ ìƒì„±í•©ë‹ˆë‹¤...', 'info');
            try {
                const maintenance = window.SystemAgents.maintenance;
                if (maintenance && maintenance.getPublicInterface) {
                    const api = maintenance.getPublicInterface();
                    await api.createBackup('test');
                    log('í…ŒìŠ¤íŠ¸ ë°±ì—…ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                    updateMaintenanceInfo();
                } else {
                    log('ìœ ì§€ë³´ìˆ˜ ì—ì´ì „íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                }
            } catch (error) {
                log(`í…ŒìŠ¤íŠ¸ ë°±ì—… ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        async function runHealthCheck() {
            log('í—¬ìŠ¤ì²´í¬ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤...', 'info');
            try {
                const maintenance = window.SystemAgents.maintenance;
                if (maintenance && maintenance.getPublicInterface) {
                    const api = maintenance.getPublicInterface();
                    const result = await api.performHealthCheck();
                    log(`í—¬ìŠ¤ì²´í¬ ì™„ë£Œ: ${result.status}`, 'success');
                    updateMaintenanceInfo();
                } else {
                    log('ìœ ì§€ë³´ìˆ˜ ì—ì´ì „íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                }
            } catch (error) {
                log(`í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        async function testAPICall() {
            log('API í˜¸ì¶œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...', 'info');
            try {
                const response = await fetch('/api/admin/dashboard-stats');
                if (response.ok) {
                    log('API í˜¸ì¶œ ì„±ê³µ', 'success');
                } else {
                    log(`API í˜¸ì¶œ ì‹¤íŒ¨: ${response.status}`, 'error');
                }
                updateGatewayMetrics();
            } catch (error) {
                log(`API í˜¸ì¶œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // ì „ì²´ í…ŒìŠ¤íŠ¸
        async function testAllAgents() {
            log('ì „ì²´ ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...', 'info');

            await testMonitoring();
            await new Promise(resolve => setTimeout(resolve, 1000));

            await testMaintenance();
            await new Promise(resolve => setTimeout(resolve, 1000));

            await testGateway();
            await new Promise(resolve => setTimeout(resolve, 1000));

            log('ì „ì²´ ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'success');
            checkStatus();
        }

        // ëª¨ë“  ì—ì´ì „íŠ¸ ì •ì§€
        function stopAllAgents() {
            log('ëª¨ë“  ì—ì´ì „íŠ¸ë¥¼ ì •ì§€í•©ë‹ˆë‹¤...', 'warning');
            try {
                if (window.SystemAgents) {
                    window.SystemAgents.stop();
                    log('ëª¨ë“  ì—ì´ì „íŠ¸ê°€ ì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤', 'info');
                    checkStatus();
                } else {
                    log('ì‹œìŠ¤í…œ ì—ì´ì „íŠ¸ê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤', 'warning');
                }
            } catch (error) {
                log(`ì—ì´ì „íŠ¸ ì •ì§€ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // ì‹œìŠ¤í…œ ì •ë³´ í‘œì‹œ
        function showSystemInfo() {
            try {
                if (window.SystemAgents) {
                    const status = window.SystemAgents.getStatus();
                    const health = window.SystemAgents.getHealth();

                    log('=== ì‹œìŠ¤í…œ ì •ë³´ ===', 'info');
                    log(`ì´ˆê¸°í™” ìƒíƒœ: ${status.initialized}`, 'info');
                    log(`í™œì„± ì—ì´ì „íŠ¸: ${status.agentCount}/3`, 'info');
                    log(`ì „ì²´ í—¬ìŠ¤: ${health.overall}`, 'info');
                    log(`íƒ€ì„ìŠ¤íƒ¬í”„: ${health.timestamp}`, 'info');
                    log('================', 'info');
                } else {
                    log('ì‹œìŠ¤í…œ ì—ì´ì „íŠ¸ê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤', 'warning');
                }
            } catch (error) {
                log(`ì‹œìŠ¤í…œ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // ì½˜ì†” ì§€ìš°ê¸°
        function clearConsole() {
            document.getElementById('console').innerHTML = '';
            log('ì½˜ì†”ì´ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤', 'info');
        }

        // ìë™ ìƒíƒœ ì—…ë°ì´íŠ¸ (10ì´ˆë§ˆë‹¤)
        setInterval(() => {
            if (window.SystemAgents && window.SystemAgents.getStatus().initialized) {
                updateMonitoringMetrics();
                updateGatewayMetrics();
                updateOverallStatus();
            }
        }, 10000);

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ
        document.addEventListener('DOMContentLoaded', function() {
            log('í…ŒìŠ¤íŠ¸ ëŒ€ì‹œë³´ë“œê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
        });
    </script>
</body>
</html>