<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📈 대시보드 - 급식관리 시스템</title>
    <link rel="icon" type="image/x-icon" href="static/favicon.ico">

    <!-- 외부 라이브러리 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- 모듈화된 CSS -->
    <link rel="stylesheet" href="static/css/user/dashboard-styles.css">

    <!-- 폴백 스타일 -->
    <style>
        body { margin: 0; font-family: 'Segoe UI', Arial, sans-serif; background: #f5f7fa; }
        .container { display: flex; min-height: 100vh; }
        .sidebar {
            width: 240px;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 0;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow-y: auto;
        }
        .main-content { flex: 1; padding: 20px; overflow-y: auto; }
        .logo {
            text-align: center;
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.1);
        }
        .logo h1 {
            font-size: 20px;
            margin: 0;
            color: #3498db;
        }
        .nav-section {
            padding: 10px 0;
        }
        .nav-title {
            padding: 8px 20px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: rgba(255,255,255,0.5);
            font-weight: 600;
        }
        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: rgba(255,255,255,0.9);
            text-decoration: none;
            transition: all 0.3s;
            font-size: 14px;
            border-left: 3px solid transparent;
        }
        .nav-item:hover {
            background: rgba(52, 152, 219, 0.2);
            border-left-color: #3498db;
        }
        .nav-item.active {
            background: rgba(52, 152, 219, 0.3);
            border-left-color: #3498db;
            font-weight: 600;
        }
        .nav-item .icon {
            margin-right: 12px;
            font-size: 16px;
            width: 20px;
            text-align: center;
        }
        .nav-divider {
            height: 1px;
            background: rgba(255,255,255,0.1);
            margin: 10px 20px;
        }
        .admin-item {
            background: rgba(231, 76, 60, 0.1);
            border-left-color: transparent;
        }
        .admin-item:hover {
            background: rgba(231, 76, 60, 0.2);
            border-left-color: #e74c3c;
        }
    </style>
</head>
<body>
    <!-- 사용자 페이지 표시 -->
    <div style="background: linear-gradient(90deg, #3498db, #2980b9); color: white; padding: 8px; text-align: center; font-size: 14px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        👤 사용자 페이지 - USER DASHBOARD
    </div>
    <div class="container">
        <!-- 사이드바 네비게이션 -->
        <nav class="sidebar">
            <div class="logo">
                <h1>🍽️ 급식관리 시스템</h1>
            </div>

            <!-- 메인 관리 -->
            <a href="dashboard.html" class="nav-item active"><i class="fas fa-home"></i>대시보드</a>
            <a href="menu_recipe_management.html" class="nav-item"><i class="fas fa-utensils"></i>메뉴/레시피 관리</a>
            <a href="meal_plan_management.html" class="nav-item"><i class="fas fa-calendar-alt"></i>식단 관리</a>
            <a href="meal_count_management.html" class="nav-item"><i class="fas fa-users"></i>식수 관리</a>
            <a href="ingredients_management.html" class="nav-item"><i class="fas fa-carrot"></i>식자재 관리</a>
            <a href="ordering_management.html" class="nav-item"><i class="fas fa-shopping-cart"></i>발주 관리</a>
            <a href="receiving_management.html" class="nav-item"><i class="fas fa-truck"></i>입고명세서 관리</a>
            <a href="#" class="nav-item"><i class="fas fa-book"></i>각종 일지</a>
            <a href="preprocessing_management.html" class="nav-item"><i class="fas fa-cut"></i>전처리지시서</a>
            <a href="cooking_instruction_management.html" class="nav-item"><i class="fas fa-fire"></i>조리지시서</a>
            <a href="portion_instruction_management.html" class="nav-item"><i class="fas fa-chart-bar"></i>소분지시서</a>
            <div class="nav-divider"></div>
            <a href="admin_dashboard.html" class="nav-item admin-item"><i class="fas fa-cog"></i>ADMIN</a>
        </nav>

        <!-- 메인 컨텐츠 -->
        <main class="main-content">
            <!-- 대시보드 헤더 -->
            <div class="dashboard-header">
                <h1>오늘의 급식 현황</h1>
                <p>📅 <span id="current-date"></span></p>
            </div>

            <!-- KPI 카드 -->
            <div class="kpi-grid">
                <div class="kpi-card meals">
                    <div class="kpi-icon">🍽️</div>
                    <div class="kpi-value" id="today-meals">2,567</div>
                    <div class="kpi-label">오늘 식수</div>
                    <div class="kpi-change positive">↑ 5.2%</div>
                </div>

                <div class="kpi-card revenue">
                    <div class="kpi-icon">💰</div>
                    <div class="kpi-value" id="today-revenue">₩5,134,000</div>
                    <div class="kpi-label">오늘 매출</div>
                    <div class="kpi-change positive">↑ 3.5%</div>
                </div>

                <div class="kpi-card average">
                    <div class="kpi-icon">📊</div>
                    <div class="kpi-value">₩2,000</div>
                    <div class="kpi-label">평균 식단가</div>
                    <div class="kpi-change negative">↓ 1.2%</div>
                </div>

                <div class="kpi-card cost">
                    <div class="kpi-icon">📈</div>
                    <div class="kpi-value">68.5%</div>
                    <div class="kpi-label">원가율</div>
                    <div class="kpi-change positive">↑ 0.5%</div>
                </div>
            </div>

            <!-- 차트 섹션 -->
            <div class="charts-section">
                <div class="chart-row">
                    <div class="chart-card">
                        <div class="chart-title">📈 15일 식수 추이</div>
                        <div class="chart-container">
                            <canvas id="mealTrendChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-title">🥧 식사시간별 분포</div>
                        <div class="chart-container small">
                            <canvas id="mealTypeChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="chart-row">
                    <div class="chart-card">
                        <div class="chart-title">💸 일별 매출</div>
                        <div class="chart-container">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-title">🏢 사업장별 매출</div>
                        <div class="chart-container small">
                            <canvas id="tabRevenueChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 인사이트 패널 -->
            <div class="insights-panel">
                <h3>📌 주요 알림</h3>
                <div class="insight-item info">
                    <div class="insight-icon">📊</div>
                    <div class="insight-content">
                        <div class="insight-title">이번 주 식수 증가</div>
                        <div class="insight-description">전주 대비 12% 증가</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 스크립트 -->
    <script src="static/js/user/dashboard-init.js"></script>
    <script>
        // 날짜 설정
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('ko-KR');
    </script>
</body>
</html>