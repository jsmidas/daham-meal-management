<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‹¤í•¨ ì‹ìì¬ ê´€ë¦¬ ì‹œìŠ¤í…œ - ê´€ë¦¬ì</title>

    <!-- ì™¸ë¶€ CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="static/css/admin-dashboard-main.css">
    <link rel="stylesheet" href="static/css/admin-dashboard-styles.css">
</head>
<body>
    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="container">
        <!-- ì‚¬ì´ë“œë°” -->
        <aside class="sidebar">
            <div class="logo">
                <i class="fas fa-utensils"></i>
                <span>ë‹¤í•¨ ê´€ë¦¬ ì‹œìŠ¤í…œ</span>
            </div>

            <nav class="nav-menu">
                <a href="#dashboard" class="nav-item active" data-page="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>ëŒ€ì‹œë³´ë“œ</span>
                </a>
                <a href="#users" class="nav-item" data-page="users">
                    <i class="fas fa-users"></i>
                    <span>ì‚¬ìš©ì ê´€ë¦¬</span>
                </a>
                <a href="#suppliers" class="nav-item" data-page="suppliers">
                    <i class="fas fa-building"></i>
                    <span>í˜‘ë ¥ì—…ì²´ ê´€ë¦¬</span>
                </a>
                <a href="#business-locations" class="nav-item" data-page="business-locations">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>ì‚¬ì—…ì¥ ê´€ë¦¬</span>
                </a>
                <a href="#supplier-mappings" class="nav-item" data-page="supplier-mappings">
                    <i class="fas fa-link"></i>
                    <span>í˜‘ë ¥ì—…ì²´ ë§¤ì¹­</span>
                </a>
                <a href="#meal-pricing" class="nav-item" data-page="meal-pricing">
                    <i class="fas fa-calculator"></i>
                    <span>ì‹ë‹¨ê°€ ê´€ë¦¬</span>
                </a>
                <a href="#ingredients" class="nav-item" data-page="ingredients">
                    <i class="fas fa-carrot"></i>
                    <span>ì‹ìì¬ ê´€ë¦¬</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <i class="fas fa-user-circle"></i>
                    <span>ê´€ë¦¬ì</span>
                </div>
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>ë¡œê·¸ì•„ì›ƒ</span>
                </button>
            </div>
        </aside>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <main class="main-content">
            <!-- í—¤ë” -->
            <header class="header">
                <div class="header-left">
                    <h1 id="page-title">ëŒ€ì‹œë³´ë“œ</h1>
                </div>
                <div class="header-right">
                    <div class="date-time">
                        <i class="fas fa-calendar"></i>
                        <span id="current-date"></span>
                    </div>
                </div>
            </header>

            <!-- í˜ì´ì§€ë³„ ì»¨í…ì¸  ì˜ì—­ -->
            <div id="content-area">
                <!-- ëŒ€ì‹œë³´ë“œ ê¸°ë³¸ ì»¨í…ì¸  -->
                <div id="dashboard-content" class="page-content active">
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">ğŸ‘¥</span>
                                <span class="card-title">ì „ì²´ ì‚¬ìš©ì</span>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-users">-</div>
                                <div class="stat-label">ë“±ë¡ëœ ì‚¬ìš©ì</div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">ğŸ¢</span>
                                <span class="card-title">í˜‘ë ¥ì—…ì²´</span>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-suppliers">-</div>
                                <div class="stat-label">ë“±ë¡ëœ ì—…ì²´</div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">ğŸ¥•</span>
                                <span class="card-title">ì‹ìì¬</span>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-ingredients">-</div>
                                <div class="stat-label">ë“±ë¡ëœ ì‹ìì¬</div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">ğŸ“</span>
                                <span class="card-title">ì‚¬ì—…ì¥</span>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="active-sites">-</div>
                                <div class="stat-label">ìš´ì˜ ì¤‘ì¸ ì‚¬ì—…ì¥</div>
                            </div>
                        </div>
                    </div>

                    <!-- ìµœê·¼ í™œë™ ë¡œê·¸ -->
                    <div class="recent-activities">
                        <div class="section-header">
                            <h2>ìµœê·¼ í™œë™</h2>
                        </div>
                        <div class="activity-list" id="activity-list">
                            <div class="activity-item">
                                <i class="fas fa-info-circle"></i>
                                <span>ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì¤‘...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ë‹¤ë¥¸ í˜ì´ì§€ ì»¨í…ì¸ ë“¤ì€ ë™ì ìœ¼ë¡œ ë¡œë“œ -->
                <div id="users-content" class="page-content"></div>
                <div id="suppliers-content" class="page-content"></div>
                <div id="business-locations-content" class="page-content"></div>
                <div id="supplier-mappings-content" class="page-content"></div>
                <div id="meal-pricing-content" class="page-content"></div>
                <div id="ingredients-content" class="page-content"></div>
            </div>
        </main>
    </div>

    <!-- CONFIG ì„¤ì • -->
    <script src="config.js"></script>

    <!-- ë©”ì¸ ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="static/js/dashboard-init.js"></script>

    <!-- ëª¨ë“ˆë“¤ -->
    <script src="static/modules/users/users-complete.js"></script>
    <script src="static/modules/sites/sites-complete.js"></script>
    <script src="static/modules/suppliers/suppliers.js"></script>

    <!-- í…œí”Œë¦¿ ë¡œë” -->
    <script>
        /**
         * ë™ì ìœ¼ë¡œ HTML í…œí”Œë¦¿ ë¡œë“œ
         */
        async function loadTemplate(templateName, targetId) {
            try {
                const response = await fetch(`static/templates/${templateName}.html`);
                if (!response.ok) throw new Error(`Failed to load ${templateName}`);

                const html = await response.text();
                const target = document.getElementById(targetId);
                if (target) {
                    target.innerHTML = html;
                    console.log(`âœ… Template loaded: ${templateName}`);
                }
            } catch (error) {
                console.error(`âŒ Failed to load template ${templateName}:`, error);
            }
        }

        // í˜ì´ì§€ë³„ í…œí”Œë¦¿ ë¡œë“œ (í•„ìš”ì‹œ)
        window.loadPageTemplate = async function(pageName) {
            switch(pageName) {
                case 'users':
                    await loadTemplate('users-section', 'users-content');
                    break;
                case 'suppliers':
                    await loadTemplate('suppliers-section', 'suppliers-content');
                    break;
                case 'business-locations':
                    await loadTemplate('sites-section', 'business-locations-content');
                    break;
            }
        };
    </script>
</body>
</html>