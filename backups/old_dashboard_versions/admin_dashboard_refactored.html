<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>다함 식자재 관리 시스템 - 관리자</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="static/css/admin-dashboard-main.css">
</head>
<body>
    <!-- 메인 컨테이너 -->
    <div class="admin-container">
        <!-- 사이드바 -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>🍽️ 식자재 관리</h2>
                <p>관리자 시스템</p>
            </div>

            <div class="nav-menu">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <span class="icon">📊</span>대시보드
                </a>
                <a href="#" class="nav-item" data-page="users">
                    <span class="icon">👥</span>사용자 관리
                </a>
                <a href="#" class="nav-item" data-page="suppliers">
                    <span class="icon">🚛</span>협력업체 관리
                </a>
                <a href="#" class="nav-item" data-page="business-locations">
                    <span class="icon">🏢</span>사업장 관리
                </a>
                <a href="#" class="nav-item" data-page="meal-pricing">
                    <span class="icon">💰</span>식단가 관리
                </a>
                <a href="#" class="nav-item" data-page="ingredients">
                    <span class="icon">📦</span>식자재 관리
                </a>
            </div>

            <div class="sidebar-footer" style="margin-top: auto; padding: 20px;">
                <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 20px;">
                    <a href="/" class="nav-item" style="background: #e8f5e8; color: #4caf50;">
                        <span class="icon">🍽️</span>급식관리로 이동
                    </a>
                </div>
            </div>
        </nav>

        <!-- 메인 컨텐츠 -->
        <main class="main-content">
            <!-- 헤더 -->
            <div class="header">
                <h1 id="page-title">관리자 대시보드</h1>
                <div class="header-info">
                    <div class="user-info">
                        관리자님, 안녕하세요! | 오늘: <span id="current-date"></span>
                    </div>
                    <button class="logout-btn" onclick="logout()">로그아웃</button>
                </div>
            </div>

            <!-- 페이지별 컨텐츠 영역 -->
            <div id="content-area">
                <!-- 대시보드 기본 컨텐츠 -->
                <div id="dashboard-content" class="page-content active">
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">👥</span>
                                <h3 class="card-title">전체 사용자</h3>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-users">-</div>
                                <div class="stat-label">등록된 사용자 수</div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">🏢</span>
                                <h3 class="card-title">사업장</h3>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-sites">-</div>
                                <div class="stat-label">관리 중인 사업장</div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">📦</span>
                                <h3 class="card-title">식자재</h3>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-ingredients">-</div>
                                <div class="stat-label">등록된 식자재</div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <span class="icon">🚛</span>
                                <h3 class="card-title">협력업체</h3>
                            </div>
                            <div class="card-content">
                                <div class="stat-number" id="total-suppliers">-</div>
                                <div class="stat-label">등록된 협력업체</div>
                            </div>
                        </div>
                    </div>

                    <!-- 최근 활동 로그 -->
                    <div class="activity-log">
                        <h3 style="margin-bottom: 20px;">📈 최근 활동</h3>
                        <div id="activity-list">
                            <div class="log-item">
                                <div class="log-time">로딩 중...</div>
                                <div class="log-message">시스템 데이터를 불러오고 있습니다.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 사용자 관리 컨텐츠 -->
                <div id="users-content" class="page-content" style="display: none;">
                    <!-- 사용자 관리 모듈이 여기에 로드됩니다 -->
                </div>

                <!-- 협력업체 관리 컨텐츠 -->
                <div id="suppliers-content" class="page-content" style="display: none;">
                    <!-- 협력업체 관리 모듈이 여기에 로드됩니다 -->
                </div>

                <!-- 사업장 관리 컨텐츠 -->
                <div id="business-locations-content" class="page-content" style="display: none;">
                    <!-- 사업장 관리 모듈이 여기에 로드됩니다 -->
                </div>

                <!-- 식단가 관리 컨텐츠 -->
                <div id="meal-pricing-content" class="page-content" style="display: none;">
                    <!-- 식단가 관리 모듈이 여기에 로드됩니다 -->
                </div>

                <!-- 식자재 관리 컨텐츠 -->
                <div id="ingredients-content" class="page-content" style="display: none;">
                    <!-- 식자재 관리 모듈이 여기에 로드됩니다 -->
                </div>
            </div>
        </main>
    </div>

    <!-- 🔗 External JavaScript Files (의존성 순서 중요) -->

    <!-- 1. 설정 파일 -->
    <script src="config.js"></script>

    <!-- 2. 유틸리티 모듈 -->
    <script src="static/utils/module-loader.js"></script>
    <script src="static/utils/admin-cache.js"></script>

    <!-- 3. 코어 모듈 -->
    <script src="static/modules/dashboard-core/dashboard-core.js"></script>

    <!-- 4. 초기화 및 네비게이션 -->
    <script src="static/js/admin-init.js"></script>
    <script src="static/js/admin-navigation.js"></script>

    <!-- 5. 시스템 시작 -->
    <script>
        // DOMContentLoaded 이벤트에서 초기화
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('🎯 [Admin Dashboard] 페이지 로드 완료, 초기화 시작...');

            try {
                // AdminInitializer 실행
                await window.adminInit.initialize();
                console.log('✅ [Admin Dashboard] 시스템 준비 완료');
            } catch (error) {
                console.error('❌ [Admin Dashboard] 초기화 실패:', error);
            }
        });
    </script>
</body>
</html>