<!-- 사업장 관리 컨텐츠 -->
<div class="content-header">
        <h1>사업장 관리</h1>
    </div>

    <!-- 사업장 통계 카드 -->
    <div style="display: flex !important; gap: 20px !important; margin-bottom: 20px !important;">
        <div style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; display: flex; align-items: center; gap: 15px; flex: 1; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
            <div style="font-size: 32px; opacity: 0.8;">🏢</div>
            <div style="flex: 1;">
                <div style="font-size: 24px; font-weight: bold; color: #333; margin-bottom: 4px;" id="totalSites">0</div>
                <div style="font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 0.5px;">전체 사업장</div>
            </div>
        </div>
        <div style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; display: flex; align-items: center; gap: 15px; flex: 1; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
            <div style="font-size: 32px; opacity: 0.8;">✅</div>
            <div style="flex: 1;">
                <div style="font-size: 24px; font-weight: bold; color: #333; margin-bottom: 4px;" id="activeSites">0</div>
                <div style="font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 0.5px;">활성 사업장</div>
            </div>
        </div>
        <div style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; display: flex; align-items: center; gap: 15px; flex: 1; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
            <div style="font-size: 32px; opacity: 0.8;">📍</div>
            <div style="flex: 1;">
                <div style="font-size: 24px; font-weight: bold; color: #333; margin-bottom: 4px;" id="regionCount">0</div>
                <div style="font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 0.5px;">운영 지역</div>
            </div>
        </div>
    </div>

    <!-- 새 사업장 추가 버튼 -->
    <div style="margin: 20px 0; text-align: right;">
        <button class="btn btn-primary" onclick="showAddSiteModal()">
            <span>+ 새 사업장 추가</span>
        </button>
    </div>

    <!-- 사업장 리스트 테이블 -->
    <div class="table-container" style="margin-top: 30px;">
        <table class="data-table">
            <thead>
                <tr>
                    <th>코드</th>
                    <th>사업장명</th>
                    <th>유형</th>
                    <th>지역</th>
                    <th>담당자</th>
                    <th>연락처</th>
                    <th>상태</th>
                    <th>작업</th>
                </tr>
            </thead>
            <tbody id="sitesTableBody">
                <tr>
                    <td colspan="8" class="loading">데이터 로딩 중...</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- 사업장 수정 모달 -->
    <style>
        /* 컴팩트 모달 스타일 */
        #siteEditModal .modal-content,
        #siteAddModal .modal-content {
            max-height: 70vh !important;
            margin: 3% auto !important;
            width: 450px !important;
        }
        #siteEditModal .modal-header,
        #siteAddModal .modal-header {
            padding: 6px 10px !important;
        }
        #siteEditModal .modal-header h2,
        #siteAddModal .modal-header h2 {
            font-size: 15px !important;
        }
        #siteEditModal .modal-body,
        #siteAddModal .modal-body {
            padding: 8px 10px !important;
            max-height: calc(70vh - 80px) !important;
            overflow-y: auto !important;
        }
        #siteEditModal .modal-footer,
        #siteAddModal .modal-footer {
            padding: 6px 10px !important;
        }
        #siteEditModal .form-group,
        #siteAddModal .form-group {
            margin-bottom: 4px !important;
        }
        #siteEditModal .form-group label,
        #siteAddModal .form-group label {
            margin-bottom: 1px !important;
            font-size: 11px !important;
        }
        #siteEditModal .form-control,
        #siteAddModal .form-control {
            padding: 3px 6px !important;
            font-size: 11px !important;
            height: 24px !important;
        }
        #siteEditModal .btn,
        #siteAddModal .btn {
            padding: 4px 10px !important;
            font-size: 12px !important;
        }
        #siteEditModal .close,
        #siteAddModal .close {
            font-size: 18px !important;
            line-height: 14px !important;
        }
    </style>
    <div id="siteEditModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="siteModalTitle">사업장 수정</h2>
                <span class="close" onclick="closeSiteModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="siteEditForm">
                    <input type="hidden" id="editSiteId">

                    <div class="form-group">
                        <label for="editSiteCode">사업장 코드:</label>
                        <input type="text" id="editSiteCode" class="form-control" readonly style="background-color: #e9ecef;">
                    </div>

                    <div class="form-group">
                        <label for="editSiteName">사업장명:</label>
                        <input type="text" id="editSiteName" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="editSiteType">사업장 유형:</label>
                        <select id="editSiteType" class="form-control">
                            <option value="급식업체">급식업체</option>
                            <option value="도시락업체">도시락업체</option>
                            <option value="운송업체">운송업체</option>
                            <option value="의료업체">의료업체</option>
                            <option value="교육기관">교육기관</option>
                            <option value="요양시설">요양시설</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="editSiteRegion">지역:</label>
                        <input type="text" id="editSiteRegion" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="editSiteManager">담당자:</label>
                        <input type="text" id="editSiteManager" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="editSitePhone">연락처:</label>
                        <input type="text" id="editSitePhone" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="editSiteStatus">상태:</label>
                        <select id="editSiteStatus" class="form-control">
                            <option value="true">활성</option>
                            <option value="false">비활성</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeSiteModal()">취소</button>
                <button type="button" class="btn btn-primary" onclick="saveSiteChanges()">저장</button>
            </div>
        </div>
    </div>

    <!-- 새 사업장 추가 모달 -->
    <div id="siteAddModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>새 사업장 추가</h2>
                <span class="close" onclick="closeAddSiteModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="siteAddForm">
                    <div class="form-group">
                        <label for="newSiteCode">사업장 코드: <span style="color: #6c757d; font-size: 12px;">자동생성</span></label>
                        <input type="text" id="newSiteCode" class="form-control" readonly style="background-color: #e9ecef;" placeholder="자동 생성됩니다">
                    </div>

                    <div class="form-group">
                        <label for="newSiteName">사업장명:</label>
                        <input type="text" id="newSiteName" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="newSiteType">사업장 유형:</label>
                        <select id="newSiteType" class="form-control">
                            <option value="급식업체">급식업체</option>
                            <option value="도시락업체">도시락업체</option>
                            <option value="운송업체">운송업체</option>
                            <option value="의료업체">의료업체</option>
                            <option value="교육기관">교육기관</option>
                            <option value="요양시설">요양시설</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="newSiteRegion">지역:</label>
                        <input type="text" id="newSiteRegion" class="form-control" value="서울">
                    </div>

                    <div class="form-group">
                        <label for="newSiteManager">담당자:</label>
                        <input type="text" id="newSiteManager" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="newSitePhone">연락처:</label>
                        <input type="text" id="newSitePhone" class="form-control">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeAddSiteModal()">취소</button>
                <button type="button" class="btn btn-primary" onclick="addNewSite()">추가</button>
            </div>
        </div>
    </div>